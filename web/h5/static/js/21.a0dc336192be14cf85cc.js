webpackJsonp([21],{pEIs:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Xxa5"),n=i.n(a),s=i("//Fk"),r=i.n(s),u=(i("eqfM"),i("/QYm")),o=i("exGp"),d=i.n(o),c=i("Dd8w"),m=i.n(c),v=i("PirY"),l=i.n(v),p=i("gyMJ"),h=i("NYxO"),f=i("Du/2"),w={data:function(){return{media:"",isPreview:this.$route.query.preview}},computed:m()({},Object(h.mapState)("course",{details:function(e){return e.details},joinStatus:function(e){return e.joinStatus}}),Object(h.mapState)({isLoading:function(e){return e.isLoading}})),mounted:function(){var e=this;return d()(n.a.mark(function t(){var i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.getMedia(e.getParams()).catch(function(e){return Object(u.a)(e.message),r.a.reject(e)});case 2:i=t.sent,["ppt","doc"].includes(e.media)?e.initPlayer(i):(e.$refs.text.innerHTML=i.media.content,e.setNavbarTitle(i.media.title));case 4:case"end":return t.stop()}},t,e)}))()},methods:m()({},Object(h.mapMutations)({setNavbarTitle:f.g}),{getParams:function(){var e=this.$route.query,t=e.courseId,i=e.taskId,a=e.type,n=!this.joinStatus&&this.isPreview;return this.media=a,n?{query:{courseId:t,taskId:i},params:{preview:1}}:{query:{courseId:t,taskId:i}}},initPlayer:function(e){var t=e.media,i="//service-cdn.qiqiuyun.net/js-sdk/sdk-v1.js?v="+Date.now()/1e3/60;l()(i,function(i){if(i)throw i;new window.QiQiuYun.Player({id:"player",resNo:t.resId,token:t.token,source:{type:e.mediaType,args:t}})})}})},x={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"web-view"},[this.isLoading?t("e-loading"):this._e(),this._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"text"!==this.media,expression:"media !== 'text'"}],attrs:{id:"player"}}),this._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"text"===this.media,expression:"media === 'text'"}],ref:"text",staticClass:"media-text"})],1)},staticRenderFns:[]},y=i("VU/8")(w,x,!1,null,null,null);t.default=y.exports}});