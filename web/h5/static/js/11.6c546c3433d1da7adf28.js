webpackJsonp([11],{SOOt:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Dd8w"),r=s.n(i),a=(s("eqfM"),s("/QYm")),n=s("Gu7T"),o=s.n(n),l=s("oHlh"),c=s("gyMJ"),d={components:{eCourse:l.a},data:function(){return{orderList:[],isEmptyOrder:!0,isFirstRequestCompile:!1,loading:!1,finished:!1,offset:0}},created:function(){},methods:{onLoad:function(){var t=this,e={offset:this.offset};c.a.getMyOrder({params:e}).then(function(e){var s=e.data,i=e.paging;t.orderList=[].concat(o()(t.orderList),o()(s)),t.offset=t.orderList.length,t.orderList.length&&(t.isEmptyOrder=!1),t.orderList.length==i.total&&(t.finished=!0),t.loading=!1}).catch(function(e){a.a.fail(e.message),t.loading=!1})}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"orders"},[s("span",{staticClass:"orders-title"},[t._v("我的订单")]),t._v(" "),t.isEmptyOrder&&t.isFirstRequestCompile?s("div",{staticClass:"orders-container__empty"},[s("img",{attrs:{src:"static/images/orderEmpty.png"}}),t._v(" "),s("span",[t._v("暂无订单记录")])]):s("div",{staticClass:"order"},[s("van-list",{staticStyle:{"padding-bottom":"40px","margin-top":"0"},attrs:{finished:t.finished},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.orderList,function(t){return s("e-course",{key:t.id,attrs:{order:t,type:"order",typeList:t.targetType}})}))],1)])},staticRenderFns:[]},p=s("VU/8")(d,u,!1,null,null,null).exports,v=s("NYxO"),m={computed:r()({},Object(v.mapState)(["user","vipSwitch"]),{vipDated:function(){if(!this.user.vip)return!1;var t=new Date(this.user.vip.deadline).getTime();return(new Date).getTime()>t}}),created:function(){this.getUserInfo()},methods:r()({},Object(v.mapActions)(["getUserInfo"]))},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user"},[s("div",{staticClass:"user-section clearfix"},[s("router-link",{attrs:{to:"/settings"}},[s("img",{staticClass:"user-img",attrs:{src:t.user.avatar.large}})]),t._v(" "),s("div",{class:["user-middle",t.vipSwitch?"":"single-middle"]},[s("div",{staticClass:"user-name"},[t._v(t._s(t.user.nickname))]),t._v(" "),t.vipSwitch?s("div",[t.user.vip?s("span",{staticClass:"user-vip"},[s("router-link",{attrs:{to:{path:"/vip",query:{id:t.user.vip.levelId}}}},[s("img",{class:["vip-img",t.vipDated?"vip-expired":""],attrs:{src:t.user.vip.icon}}),t._v(" "),t.vipDated?s("span",{staticClass:"grey"},[t._v(t._s(t.user.vip.vipName)+"已过期，"),s("span",{staticClass:"color-primary"},[t._v("重新开通")])]):s("span",{staticClass:"color-primary"},[t._v(t._s(t.user.vip.vipName))])])],1):s("div",[s("router-link",{staticClass:"user-vip",attrs:{to:"/vip"}},[t._v("\n            您还不是会员，"),s("span",{staticClass:"color-primary"},[t._v("去开通")])])],1)]):t._e()]),t._v(" "),s("router-link",{staticClass:"user-setting",attrs:{to:"/settings"}},[s("img",{attrs:{src:"static/images/setting.png"}})])],1)])},staticRenderFns:[]},g=s("VU/8")(m,f,!1,null,null,null).exports,_={mixins:[s("vzuq").a],components:{Orders:p,User:g},computed:r()({},Object(v.mapState)({isLoading:function(t){return t.isLoading}})),created:function(){setTimeout(function(){window.scrollTo(0,0)},100)}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this.isLoading?e("e-loading"):this._e(),this._v(" "),e("user"),this._v(" "),e("orders")],1)},staticRenderFns:[]},y=s("VU/8")(_,h,!1,null,null,null);e.default=y.exports},vzuq:function(t,e,s){"use strict";var i=s("IcnI");e.a={beforeRouteEnter:function(t,e,s){!i.a.state.token?s({name:"prelogin",query:{redirect:t.fullPath}}):s()}}}});